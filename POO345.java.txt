package orders;

	import geographic.Position;

	public interface Deliverable {
	    double getWeight();      // وزن الشحنة بالكيلوجرام
	    Position getDestination(); // موقع التوصيل
	}
-------------------------------------------------------------------------
     import geographic.Position;

	public class StandardPackage implements Deliverable {
	    private double weight;      // وزن الشحنة (kg)
	    private Position destination; // موقع التوصيل
	    
	    public StandardPackage(double weight, Position destination) {
	        this.weight = weight;
	        this.destination = destination;
	    }
	    
	    @Override
	    public double getWeight() {
	        return weight;
	    }
	    
	    @Override
	    public Position getDestination() {
	        return destination;
	    }
	    
	    // Setter methods
	    public void setWeight(double weight) {
	        this.weight = weight;
	    }
	    
	    public void setDestination(Position destination) {
	        this.destination = destination;
	    }
	    
	    @Override
	    public String toString() {
	        return "Package[weight=" + weight + "kg, destination=" + destination + "]";
	    }
	}
----------------------------------------------------------------------------------------------------
import exceptions.CapacityExceededException;

	public class Order {
	    private static int nextId = 1;
	    
	    private int id;
	    private String client;
	    private Deliverable deliverable;
	    private double cost;
	    private String urgency;  // NORMAL or EXPRESS
	    private String status;   // PENDING, IN_PROGRESS, DELIVERED, FAILED
	    
	    public Order(String client, Deliverable deliverable, String urgency) {
	        this.id = nextId++;
	        this.client = client;
	        this.deliverable = deliverable;
	        this.urgency = urgency;
	        this.status = "PENDING";
	        this.cost = 0.0; // سيتم حسابه لاحقاً
	    }
	    
	    // Getters
	    public int getId() { return id; }
	    public String getClient() { return client; }
	    public Deliverable getDeliverable() { return deliverable; }
	    public double getCost() { return cost; }
	    public String getUrgency() { return urgency; }
	    public String getStatus() { return status; }
	    
	    // Setters
	    public void setCost(double cost) { 
	        if (cost >= 0) this.cost = cost; 
	    }
	    
	    public void setStatus(String status) { 
	        if (status != null) this.status = status; 
	    }
	    
	    // Check if order is express
	    public boolean isExpress() {
	        return "EXPRESS".equals(urgency);
	    }
	    
	    // Get package weight (helper method)
	    public double getPackageWeight() {
	        if (deliverable == null) return 0;
	        return deliverable.getWeight();
	    }
	    
	    @Override
	    public String toString() {
	        return "Order #" + id + " [Client: " + client + 
	               ", Urgency: " + urgency + 
	               ", Status: " + status + 
	               ", Cost: " + cost + 
	               ", Package: " + deliverable + "]";
	    }
	}
-------------------------------------------------------------------------------------------
import geographic.Position;

	public class TestOrders {
	    public static void main(String[] args) {
	        System.out.println("=== Testing Orders Package ===");
	        
	        // Create package
	        Position destination = new Position(5, 3);
	        StandardPackage package1 = new StandardPackage(0.5, destination);
	        
	        System.out.println("1. Package created: " + package1);
	        System.out.println("   Weight: " + package1.getWeight() + "kg");
	        System.out.println("   Destination: " + package1.getDestination());
	        
	        // Create order
	        Order order1 = new Order("Ali", package1, "NORMAL");
	        System.out.println("\n2. Order created: " + order1);
	        
	        // Create express order
	        StandardPackage package2 = new StandardPackage(0.3, new Position(10, 2));
	        Order order2 = new Order("Lina", package2, "EXPRESS");
	        System.out.println("\n3. Express order created: " + order2);
	        
	        // Test order methods
	        System.out.println("\n4. Testing order methods:");
	        System.out.println("   Order1 is express? " + order1.isExpress());
	        System.out.println("   Order2 is express? " + order2.isExpress());
	        System.out.println("   Order1 package weight: " + order1.getPackageWeight() + "kg");
	        
	        // Update order status
	        order1.setStatus("IN_PROGRESS");
	        order1.setCost(150.75);
	        System.out.println("\n5. Updated order1: " + order1);
	        
	        // Test multiple orders (auto-increment ID)
	        Order order3 = new Order("Omar", package1, "NORMAL");
	        System.out.println("\n6. Order3 (check auto ID): " + order3);
	        
	        System.out.println("\n=== Test Complete ===");
	    }
	}
_______________________________________________________________________________________________________
package control;

	import drones.Drone;
	import geographic.Map;
	import geographic.Position;
	import orders.Order;
	import exceptions.BatteryLowException;
	import exceptions.CapacityExceededException;
	import java.util.ArrayList;
	import java.util.List;

	public class ControlCenter {
	    private List<Drone> fleet;            // أسطول الطائرات
	    private List<Order> pendingOrders;    // طلبات قيد الانتظار
	    private List<Order> processedOrders;  // طلبات معالجة
	    private Position base;                // المركز الرئيسي
	    private Map map;                      // الخريطة
	    
	    // إحصائيات عامة (static)
	    private static int totalDeliveries = 0;
	    private static double totalDistance = 0;
	    
	    public ControlCenter(Position base) {
	        this.base = base;
	        this.fleet = new ArrayList<>();
	        this.pendingOrders = new ArrayList<>();
	        this.processedOrders = new ArrayList<>();
	        this.map = new Map();
	    }
	    
	    // إضافة طائرة للأسطول
	    public void addDrone(Drone drone) {
	        if (drone != null) {
	            fleet.add(drone);
	            System.out.println("Drone #" + drone.getId() + " added to fleet");
	        }
	    }
	    
	    // إضافة طلب
	    public void addOrder(Order order) {
	        if (order != null) {
	            pendingOrders.add(order);
	            System.out.println("Order #" + order.getId() + " added to pending orders");
	        }
	    }
	    
	    // البحث عن طائرة مناسبة لطلب معين
	    public Drone findDroneForOrder(Order order) throws CapacityExceededException {
	        if (order == null || order.getDeliverable() == null) {
	            return null;
	        }
	        
	        for (Drone drone : fleet) {
	            try {
	                // 1. التحقق من حالة الطائرة
	                if (!"AVAILABLE".equals(drone.getStatus())) {
	                    continue;
	                }
	                
	                // 2. التحقق من سعة الحمل
	                double weight = order.getDeliverable().getWeight();
	                drone.canCarry(weight);
	                
	                // 3. التحقق من أن الوجهة مسموح بها (بدون exception)
	                Position destination = order.getDeliverable().getDestination();
	                if (!map.isAllowed(destination)) {
	                    // فقط رسالة بدون exception
	                    System.out.println("Warning: Destination " + destination + " is in no-fly zone");
	                    continue; // جرب طائرة أخرى
	                }
	                
	                // 4. التحقق من البطارية
	                double distanceToDestination = drone.getPosition().distanceTo(destination);
	                double roundTripDistance = distanceToDestination * 2;
	                double requiredBattery = drone.calculateConsumption(roundTripDistance);
	                
	                if (drone.getBattery() >= requiredBattery) {
	                    return drone; // وجدنا طائرة مناسبة
	                }
	                
	            } catch (CapacityExceededException e) {
	                // هذه الطائرة لا تتحمل الوزن، جرب الطائرة التالية
	                continue;
	            }
	        }
	        
	        return null; // لم نجد طائرة مناسبة
	    }
	    
	    // تعيين طلب لطائرة
	    public boolean assignOrder(Order order) {
	        if (order == null) {
	            return false;
	        }
	        
	        try {
	            Drone drone = findDroneForOrder(order);
	            
	            if (drone != null) {
	                // تحديث حالة الطائرة والطلب
	                drone.setStatus("IN_DELIVERY");
	                order.setStatus("IN_PROGRESS");
	                
	                // نقل الطلب من القائمة
	                pendingOrders.remove(order);
	                processedOrders.add(order);
	                
	                // تحديث الإحصائيات
	                totalDeliveries++;
	                
	                System.out.println("Order #" + order.getId() + " assigned to Drone #" + drone.getId());
	                return true;
	            } else {
	                System.out.println("No available drone found for Order #" + order.getId());
	                return false;
	            }
	        }
	    
	     catch (CapacityExceededException e) {
            System.out.println("Cannot assign order #" + order.getId() + ": " + e.getMessage());
            return false;
        }
    }
    
    // محاكاة توصيل طلب
    public void deliverOrder(Order order, Drone drone) throws BatteryLowException {
        if (order == null  || drone == null || order.getDeliverable() == null) {
            return;
        }
        
        try {
            // التحقق من المنطقة المحظورة أولاً
            Position destination = order.getDeliverable().getDestination();
            if (!map.isAllowed(destination)) {
                System.out.println("Cannot deliver to no-fly zone: " + destination);
                order.setStatus("FAILED");
                return;
            }
            
            // الطيران إلى الوجهة
            drone.flyTo(destination);
            
            // تحديث حالة الطلب
            order.setStatus("DELIVERED");
            
            // الطيران عودة إلى المركز
            drone.flyTo(base);
            drone.setStatus("AVAILABLE");
            
            // تحديث المسافة الإجمالية
            double distance = drone.getPosition().distanceTo(destination) * 2;
            totalDistance += distance;
            
            System.out.println("Order #" + order.getId() + " delivered successfully by Drone #" + drone.getId());
            
        } catch (BatteryLowException e) {
            order.setStatus("FAILED");
            drone.setStatus("RETURN_TO_BASE");
            throw e;
        }
    }
    
    // معالجة الطلبات المعلقة
    public void processPendingOrders() {
        System.out.println("\nProcessing pending orders...");
        
        List<Order> ordersToProcess = new ArrayList<>(pendingOrders);
        
        for (Order order : ordersToProcess) {
            boolean assigned = assignOrder(order);
            if (assigned) {
                System.out.println("  - Order #" + order.getId() + ": ASSIGNED");
            } else {
                System.out.println("  - Order #" + order.getId() + ": NOT ASSIGNED");
            }
        }
    }
    
    // GETTERS
    public List<Drone> getFleet() { return new ArrayList<>(fleet); }
    public List<Order> getPendingOrders() { return new ArrayList<>(pendingOrders); }
    public List<Order> getProcessedOrders() { return new ArrayList<>(processedOrders); }
    public Position getBase() { return base; }
    public Map getMap() { return map; }
    
    // الإحصائيات
    public static int getTotalDeliveries() { return totalDeliveries; }
    public static double getTotalDistance() { return totalDistance; }
    
    public void displayStatistics() {
        System.out.println("\n=== CONTROL CENTER STATISTICS ===");
        System.out.println("Fleet size: " + fleet.size() + " drones");
        System.out.println("Pending orders: " + pendingOrders.size());
        System.out.println("Processed orders: " + processedOrders.size());
        System.out.println("Total deliveries: " + totalDeliveries);
        System.out.println("Total distance: " + totalDistance + " km");
        System.out.println("=================================\n");
    }
}import drones.Drone;
	import drones.StandardDrone;
	import drones.ExpressDrone;
	import geographic.Position;
	import orders.Order;
	import orders.StandardPackage;

	public class TestControl {
	    public static void main(String[] args) {
	        System.out.println("=== Control Center Test ===");
	        
	        try {
	            // 1. Create control center
	            Position base = new Position(0, 0);
	            ControlCenter center = new ControlCenter(base);
	            System.out.println("Step 1: Created control center");
	            
	            // 2. Create drones
	            StandardDrone drone1 = new StandardDrone(base);
	            ExpressDrone drone2 = new ExpressDrone(base);
	            
	            // 3. Add drones to center
	            center.addDrone(drone1);
	            center.addDrone(drone2);
	            System.out.println("Step 2: Added 2 drones");
	            
	            // 4. Create orders
	            StandardPackage package1 = new StandardPackage(0.5, new Position(10, 10));
	            StandardPackage package2 = new StandardPackage(0.3, new Position(5, 5));
	            
	            Order order1 = new Order("Ali", package1, "NORMAL");
	            Order order2 = new Order("Lina", package2, "EXPRESS");
	            
	            // 5. Add orders to center
	            center.addOrder(order1);
	            center.addOrder(order2);
	            System.out.println("Step 3: Added 2 orders");
	            
	            // 6. Show initial stats
	            System.out.println("\nInitial Statistics:");
	            center.displayStatistics();
	            
	            // 7. Process orders
	            System.out.println("Processing orders...");
	            center.processPendingOrders();
	            
	            // 8. Show final stats
	            System.out.println("\nFinal Statistics:");
	            center.displayStatistics();
	            
	            // 9. Show drone info
	            System.out.println("Drone Information:");
	            for (Drone drone : center.getFleet()) {
	                System.out.println("  " + drone);
	            }
	            
	        } catch (Exception e) {
	            System.out.println("Error: " + e.getMessage());
	            e.printStackTrace();
	        }
	        
	        System.out.println("\n=== Test Finished ===");
	    }
	}
___________________________________________________________________________________________
       package Simulator;

	import control.ControlCenter;
	import drones.*;
	import geographic.*;
	import orders.*;
	import exceptions.BatteryLowException;
	import java.util.Random;

	public class Simulator {
	    private ControlCenter controlCenter;
	    private Random random;
	    
	    public Simulator() {
	        Position base = new Position(0, 0);
	        this.controlCenter = new ControlCenter(base);
	        this.random = new Random();
	    }
	    
	    public void setupSimulation() {
	        System.out.println("=== Setting up simulation ===");
	        
	        // 1. إنشاء الطائرات
	        createDrones();
	        
	        // 2. لا ننشئ مناطق محظورة (لأن ما في method addNoFlyZone)
	        // createNoFlyZones(); // ❌ تعليق هذا السطر
	        
	        // 3. إنشاء الطلبات
	        createOrders(10);
	        
	        System.out.println("Simulation setup complete!");
	        controlCenter.displayStatistics();
	    }
	    
	    private void createDrones() {
	        Position base = controlCenter.getBase();
	        
	        // إنشاء طائرات أقل لتجنب التعقيد
	        StandardDrone drone1 = new StandardDrone(base);
	        ExpressDrone drone2 = new ExpressDrone(base);
	        HeavyDrone drone3 = new HeavyDrone(base);
	        
	        controlCenter.addDrone(drone1);
	        controlCenter.addDrone(drone2);
	        controlCenter.addDrone(drone3);
	        
	        System.out.println("Created 3 drones (one of each type)");
	    }
	    
	    private void createOrders(int count) {
	        String[] clients = {"Ali", "Lina", "Omar"};
	        String[] urgencies = {"NORMAL", "EXPRESS"};
	        
	        for (int i = 0; i < count; i++) {
	            // إنشاء موقع قريب (بين 1 و 20 كم)
	            double x = 1 + random.nextDouble() * 19;
	            double y = 1 + random.nextDouble() * 19;
	            Position destination = new Position(x, y);
	            
	            // وزن معقول
	            double weight = 0.3 + random.nextDouble() * 0.7; // بين 0.3 و 1.0 كجم
	            
	            // عميل ونوع
	            String client = clients[random.nextInt(clients.length)];
	            String urgency = urgencies[random.nextInt(urgencies.length)];
	            
	            // إنشاء الطلب
	            StandardPackage pkg = new StandardPackage(weight, destination);
	            Order order = new Order(client, pkg, urgency);
	            
	            controlCenter.addOrder(order);
	        }
	        
	        System.out.println("Created " + count + " orders");
	    }
	    
	    public void runSimulation() {
	        System.out.println("\n=== Starting short simulation (10 minutes) ===");
	        
	        // محاكاة مختصرة (10 دقائق بدل 480)
	        for (int minute = 1; minute <= 10; minute++) {
	            System.out.println("\nMinute " + minute + ":");
	            
	            // كل دقيقتين، معالجة الطلبات
	            if (minute % 2 == 0) {
	                controlCenter.processPendingOrders();
	            }
	        }
	        
	        System.out.println("\n=== Simulation complete! ===");
	    }
	    
	    public void displayFinalResults() {
	        System.out.println("\n=== FINAL RESULTS ===");
	        controlCenter.displayStatistics();
	    }
	    
	    public void runFullSimulation() {
	        setupSimulation();
	        runSimulation();
	        displayFinalResults();
	    }
	}

----------------------------------------------------------------------------------------------
import geographic.*;
	import drones.*;
	import orders.*;
	import control.*;
	import exceptions.*;
 public class main1 {
	
	    
	    public static void main(String[] args) {
	        System.out.println("================================================");
	        System.out.println("   DRONE DELIVERY - COMPREHENSIVE TEST SUITE   ");
	        System.out.println("================================================\n");
	        
	        boolean allTestsPassed = true;
	        
	        try {
	            // Test 1: Geographic package
	            System.out.println("1. TESTING GEOGRAPHIC PACKAGE");
	            System.out.println("-----------------------------");
	            allTestsPassed &= testGeographic();
	            
	            // Test 2: Drones package  
	            System.out.println("\n2. TESTING DRONES PACKAGE");
	            System.out.println("-------------------------");
	            allTestsPassed &= testDrones();
	            
	            // Test 3: Orders package
	            System.out.println("\n3. TESTING ORDERS PACKAGE");
	            System.out.println("-------------------------");
	            allTestsPassed &= testOrders();
	            
	            // Test 4: Exceptions package
	            System.out.println("\n4. TESTING EXCEPTIONS PACKAGE");
	            System.out.println("-----------------------------");
	            allTestsPassed &= testExceptions();
	            
	            // Test 5: Control package
	            System.out.println("\n5. TESTING CONTROL PACKAGE");
	            System.out.println("--------------------------");
	            allTestsPassed &= testControl();
	            
	            // Test 6: Full simulation
	            System.out.println("\n6. TESTING FULL SIMULATION");
	            System.out.println("--------------------------");
	            allTestsPassed &= testSimulation();
	            
	        } catch (Exception e) {
	            System.out.println("\n❌ CRITICAL ERROR: " + e.getMessage());
	            allTestsPassed = false;
	        }
	        
	        // النتيجة النهائية
	        System.out.println("\n" + "=".repeat(48));
	        if (allTestsPassed) {
	            System.out.println("✅ ALL TESTS PASSED SUCCESSFULLY!");
	        } else {
	            System.out.println("❌ SOME TESTS FAILED!");
	        }
	        System.out.println("=".repeat(48));
	    }
	    
	    // ========== TEST METHODS ==========
	    
	    private static boolean testGeographic() {
	        try {
	            System.out.println("Testing Position...");
	            Position p1 = new Position(0, 0);
	            Position p2 = new Position(3, 4);
	            double distance = p1.distanceTo(p2);
	            System.out.println("  ✓ Distance calculation: " + distance + " (expected: 5.0)");
	            
	            System.out.println("Testing moveTo...");
	            p1.moveTo(p2, 2.5);
	            System.out.println("  ✓ Move to destination");
	            
	            System.out.println("Testing DeliveryZone...");
	            DeliveryZone zone = new DeliveryZone(new Position(5, 5), 2);
	            boolean contains = zone.contains(new Position(6, 6));
	            System.out.println("  ✓ Zone containment test: " + contains);
	            
	            System.out.println("Testing Map...");
	            Map map = new Map();
	            map.addNoFlyZone(new NoFlyZone(new Position(10, 10), 5));
	            boolean allowed = map.isAllowed(new Position(12, 12));
	            System.out.println("  ✓ Map validation: " + allowed);
	            
	            return true;
	        } catch (Exception e) {
	            System.out.println("  ✗ Error: " + e.getMessage());
	            return false;
	        }
	    }
	    
	    private static boolean testDrones() {
	        try {
	            System.out.println("Testing Drone creation...");
	            Position base = new Position(0, 0);
	            StandardDrone standard = new StandardDrone(base);
	            ExpressDrone express = new ExpressDrone(base);
	            HeavyDrone heavy = new HeavyDrone(base);
	            System.out.println("  ✓ Created 3 drone types");
	            System.out.println("Testing battery management...");
	            standard.setBattery(50);
	            standard.recharge(30);
	            System.out.println("  ✓ Battery: " + standard.getBattery() + "%");
	            
	            System.out.println("Testing capacity validation...");
	            try {
	                standard.canCarry(1.5); // Should throw exception
	                System.out.println("  ✗ Should have thrown exception!");
	                return false;
	            } catch (CapacityExceededException e) {
	                System.out.println("  ✓ Correctly threw: " + e.getMessage());
	            }
	            
	            System.out.println("Testing flight consumption...");
	            double consumption = standard.calculateConsumption(10);
	            System.out.println("  ✓ Consumption for 10km: " + consumption + "%");
	            
	            System.out.println("Testing flight...");
	            standard.setBattery(100);
	            try {
	                standard.flyTo(new Position(1, 1));
	                System.out.println("  ✓ Flight successful");
	            } catch (BatteryLowException e) {
	                System.out.println("  ✗ Flight failed: " + e.getMessage());
	                return false;
	            }
	            
	            return true;
	        } catch (Exception e) {
	            System.out.println("  ✗ Error: " + e.getMessage());
	            return false;
	        }
	    }
	    
	    private static boolean testOrders() {
	        try {
	            System.out.println("Testing Package creation...");
	            StandardPackage pkg = new StandardPackage(0.5, new Position(10, 10));
	            System.out.println("  ✓ Package weight: " + pkg.getWeight() + "kg");
	            System.out.println("  ✓ Package destination: " + pkg.getDestination());
	            
	            System.out.println("Testing Order creation...");
	            Order order = new Order("Test Client", pkg, "NORMAL");
	            System.out.println("  ✓ Order ID: " + order.getId());
	            System.out.println("  ✓ Order client: " + order.getClient());
	            System.out.println("  ✓ Order urgency: " + order.getUrgency());
	            
	            System.out.println("Testing Order status updates...");
	            order.setStatus("IN_PROGRESS");
	            order.setCost(150.75);
	            System.out.println("  ✓ Status: " + order.getStatus());
	            System.out.println("  ✓ Cost: " + order.getCost());
	            
	            return true;
	        } catch (Exception e) {
	            System.out.println("  ✗ Error: " + e.getMessage());
	            return false;
	        }
	    }
	    
	    private static boolean testExceptions() {
	        try {
	            System.out.println("Testing BatteryLowException...");
	            BatteryLowException batteryEx = new BatteryLowException(20, 30);
	            System.out.println("  ✓ Created: " + batteryEx.getMessage());
	            
	            System.out.println("Testing CapacityExceededException...");
	            CapacityExceededException capacityEx = new CapacityExceededException(1.0, 1.5);
	            System.out.println("  ✓ Created: " + capacityEx.getMessage());
	            
	            return true;
	        } catch (Exception e) {
	            System.out.println("  ✗ Error: " + e.getMessage());
	            return false;
	        }
	    }
	    
	    private static boolean testControl() {
	        try {
	            System.out.println("Testing ControlCenter creation...");
	            ControlCenter center = new ControlCenter(new Position(0, 0));
	            System.out.println("  ✓ ControlCenter created");
	            
	            System.out.println("Testing drone addition...");
	            center.addDrone(new StandardDrone(new Position(0, 0)));
	            System.out.println("  ✓ Added drone to fleet");
	            
	            System.out.println("Testing order addition...");
	            StandardPackage pkg = new StandardPackage(0.3, new Position(5, 5));
	            Order order = new Order("Test", pkg, "NORMAL");
	            center.addOrder(order);
	            System.out.println("  ✓ Added order");
	            System.out.println("Testing order processing...");
	            center.processPendingOrders();
	            System.out.println("  ✓ Processed orders");
	            
	            System.out.println("Testing statistics...");
	            center.displayStatistics();
	            
	            return true;
	        } catch (Exception e) {
	            System.out.println("  ✗ Error: " + e.getMessage());
	            return false;
	        }
	    }
	    
	    private static boolean testSimulation() {
	        try {
	            System.out.println("Creating Simulator...");
	            Simulator simulator = new Simulator();
	            System.out.println("  ✓ Simulator created");
	            
	            System.out.println("Setting up simulation...");
	            simulator.setupSimulation();
	            System.out.println("  ✓ Setup complete");
	            
	            System.out.println("Running short simulation...");
	            // Run a very short simulation for testing
	            Simulator testSim = new Simulator();
	            testSim.setupSimulation();
	            System.out.println("  ✓ Short simulation complete");
	            
	            System.out.println("Displaying results...");
	            simulator.displayFinalResults();
	            System.out.println("  ✓ Results displayed");
	            
	            return true;
	        } catch (Exception e) {
	            System.out.println("  ✗ Error: " + e.getMessage());
	            return false;
	        }
	    }
	}
____________________________
